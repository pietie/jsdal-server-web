<div [@componentState]="componentState">

    <div class="page-header"><h2><i class="fa fa-cogs pr8"></i>Project: {{projectName}}</h2></div>

    <button (click)="onAddNewDatabase()" style="width:220px;" class="btn btn-info btn-sm form-control" >Add database source</button>
    <br />
    <table class="table table-striped" *ngIf="dbList">
        <thead>
            <tr>
                <th style="width:200px"></th>
                <th style="width:300px">Name</th>
                <th style="width:200px">Source</th>
                <th></th>
                <th>Key</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let row of dbList">
                <td class="anchorColumn">
                    <a (click)="projectService.currentDatabaseSource = row" [routerLink]="['./' + row.Name]">manage</a>
                    <!--<a (click)="projectService.currentDatabaseSource = row" [routerLink]="['./manage', { name: row.Name }]">manage</a>-->
                    <a (click)="onEditDatabaseSource(row)">edit</a>
                    <a (click)="onDeleteDatabase(row)">delete</a>
                </td>
                <td>{{row.Name}}</td>
                <td>
                    {{row.DataSource}}; {{row.InitialCatalog}}
                </td>
                <td>

                    <span class="label" [class.label-primary]="row.DefaultRuleMode==0" [class.label-danger]="row.DefaultRuleMode==1" [title]="row.DefaultRuleMode==0?'By default all routines are INCLUDED in the generated files':'By default all routines are EXCLUDED in the generated files'">{{row.DefaultRuleMode==0? "Include all": "Exclude all"}}</span>

                </td>
                <td>
                    {{row.Guid}}
                </td>
            </tr>
            <tr *ngIf="!dbList || dbList.length == 0">
                <td colspan="4">No database sources exist yet.</td>

            </tr>
        </tbody>
    </table>


</div>

<router-outlet></router-outlet>
